{
    "generators": [ 
        {
            "topic": "salesbaskets-shadow",
            "varsOnce": {
                "invoiceNumber": {
                    "_gen": "uuid"
                }
            },
            "fork": {
                "key": {
                    "_gen": "var",
                    "var": "invoiceNumber"
                },
                "maxForks": 10,
                "stagger": { "ms": 100 }
            },
            "key": {
                "jvmId": {
                    "_gen": "var", 
                    "var": "invoiceNumber"
                }
            },
            "vars": {
                "store": {
                    "_gen": "oneOf",
                    "choices": [
                        {"id": "1001", "name": "Downtown Store"},
                        {"id": "1002", "name": "Uptown Market"},
                        {"id": "1003", "name": "City Mall"},
                        {"id": "1004", "name": "Village Shop"},
                        {"id": "1005", "name": "Central Plaza"},
                        {"id": "1006", "name": "Westside Market"},
                        {"id": "1007", "name": "Eastend Mart"},
                        {"id": "1008", "name": "Northgate Store"},
                        {"id": "1009", "name": "South Plaza"},
                        {"id": "1010", "name": "Metro Mart"}
                    ]
                },
                "clerk": {
                    "_gen": "oneOf",
                    "choices": [
                        {"id": "201", "name": "Alice", "surname": "Smith"},
                        {"id": "202", "name": "Bob", "surname": "Johnson"},
                        {"id": "203", "name": "Charlie", "surname": "Williams"},
                        {"id": "204", "name": "David", "surname": "Brown"},
                        {"id": "205", "name": "Eve", "surname": "Jones"},
                        {"id": "206", "name": "Frank", "surname": "Garcia"},
                        {"id": "207", "name": "Grace", "surname": "Miller"},
                        {"id": "208", "name": "Hank", "surname": "Davis"},
                        {"id": "209", "name": "Ivy", "surname": "Rodriguez"},
                        {"id": "210", "name": "Jack", "surname": "Martinez"}
                    ]
                },
                "basketItems": {
                    "_gen": "repeatedly",
                    "n": {
                        "_gen": "uniformDistribution",
                        "bounds": [1, 5], 
                        "decimals": 0
                    },
                    "target": {
                        "_gen": "merge", 
                        "objects": [
                            {
                                "_gen": "oneOf",
                                "choices":[
                                    {"id": "001", "name": "Minty Fresh", "brand": "Colgate", "category": "Healthcare", "price": 25.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "002", "name": "All Bran", "brand": "Kellog's", "category": "Cereal", "price": 15.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "003", "name": "Sugar Free", "brand": "Coke", "category": "Cool drinks", "price": 12.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "004", "name": "Auto Wash", "brand": "OMO", "category": "Cleaning", "price": 35.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "005", "name": "Super Clean", "brand": "Unilever", "category": "Cleaning", "price": 40.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "006", "name": "Ultra White", "brand": "Dove", "category": "Personal Care", "price": 30.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "007", "name": "Healthy Smile", "brand": "Colgate", "category": "Healthcare", "price": 20.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "008", "name": "Bright Morning", "brand": "Nestle", "category": "Cereal", "price": 22.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "009", "name": "Pure Fresh", "brand": "Lipton", "category": "Beverages", "price": 10.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}},
                                    {"id": "010", "name": "Daily Wash", "brand": "Tide", "category": "Cleaning", "price": 28.00, "quantity": {"_gen": "uniformDistribution", "bounds": [1, 20], "decimals": 0}, "subtotal": {"_gen": "multiply","args": [{"_gen": "var", "var": "basketItems", "path": ["[&]", "price"]},{"_gen": "var", "var": "basketItems", "path": ["[&]", "quantity"]}]}}        
                                ]
                            }
                        ]
                    }
                }  
                  
            },
            "value": {
                "invoiceNumber": {
                    "_gen": "var",
                    "var": "invoiceNumber"
                },
                "saleDateTime_Ltz": {
                    "_gen": "formatDateTime",
                    "ms": {
                        "_gen": "now"
                      },
                      "format": "yyyy-MM-dd'T'HH:mm:ss"
                },
                "salesTimetamp_Epoc": {
                    "_gen": "now"
                },
                "store": {
                    "_gen": "var",
                    "var": "store"
                },
                "clerk": {
                    "_gen": "var",
                    "var": "clerk"
                },
                "basketItems": {
                    "_gen": "var",
                    "var": "basketItems"
                }
              
            }
        }
    ],
    "connections": {
        "confluent-kafka": {
            "kind": "kafka",
            "topicPolicy": {
                "policy": "dropAndCreate",
                "partitions": 1,
                "replicationFactor": 1
            },
            "producerConfigs": {
                "bootstrap.servers": "localhost:9092",
                "key.serializer": "io.shadowtraffic.kafka.serdes.JsonSerializer",
                "value.serializer": "io.shadowtraffic.kafka.serdes.JsonSerializer"
            }
        }
    }
}


